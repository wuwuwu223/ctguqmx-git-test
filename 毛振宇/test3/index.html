<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./reset.css">
    <link rel="stylesheet" href="./bilibilichun.css">
    <link rel="stylesheet" href="./bilibili.css">
</head>
<body>

    <div class="comtain">
        <div class="top">
                <div class="bilibilichun">
                    <div class="animate-banner" id="animate-banner">
                        <div class="layer">
                        <img src="./imgs/i1.png" data-move-multiple="16.395" >
                        </div>
                        <div class="layer">
                        <img src="./imgs/i2.png" data-move-multiple="16.395" >
                        </div>
                        <div class="layer">
                        <img src="./imgs/i3.png" data-move-multiple="12.145" >
                        </div>
                        <div class="layer">
                        <img src="./imgs/i4.png" data-move-multiple="3.718" >
                        </div>
                        <div class="layer">
                        <img src="./imgs/i5.png" data-move-multiple="14.573" >
                        </div>
                        <div class="layer">
                        <img src="./imgs/i6.png" data-move-multiple="29.277" data-is-opacity="0">
                        </div>
                        <div class="layer">
                        <img src="./imgs/i7.png" data-move-multiple="2.342" >
                        </div>
                        <div class="layer">
                        <img src="./imgs/i8.png" data-move-multiple="1.952" >
                        </div>
                        <div class="layer">
                        <img src="./imgs/i9.png" data-move-multiple="4.098" data-is-opacity="1">
                        </div>
                        <div class="layer">
                        <img src="./imgs/i10.png" data-move-multiple="2.826" data-is-opacity="1">
                        </div>
                        <div class="layer">
                        <img src="./imgs/i11.png" data-move-multiple="1.457" >
                        </div>
                        <div class="layer">
                        <img src="./imgs/i12.png" data-move-multiple="1.092" >
                        </div>
                        <div class="layer">
                        <img src="./imgs/i13.png" data-move-multiple="1.104" >
                        </div>
                        <div class="layer">
                        <img src="./imgs/i14.png" data-move-multiple="0.781">
                        </div>
                        <div class="layer">
                        <img src="./imgs/i15.png" data-move-multiple="0.546" >
                        </div>
                        <canvas id="canvas" width="1920" height="180"></canvas>
                    </div>
                    <script>
                        // 鼠标移动
                        const mb = document.getElementById('animate-banner')
                        let intX
                        let imgs = document.querySelectorAll('.layer img')
                        imgs = [...imgs]
                        
                        let o_imgs_styles = imgs.map(el => {
                        let s = window.getComputedStyle(el, null).getPropertyValue('transform')
                        return `transform: ${s}`
                        })
                    
                        let o_imgs_opacitys = imgs.map(el => {
                        let o = window.getComputedStyle(el, null).getPropertyValue('opacity')
                        return `opacity: ${0}`
                        })
                    
                        function getTranslateVal(str) {
                        let s = 'translate', e = ')'
                        let si = str.indexOf(s)
                        let ei
                        }
                    
                        mb.onmouseenter = function({ x }) {
                        intX = x
                        }
                        mb.onmousemove = function({ x }) {
                        imgs.forEach((el, i) => {
                            const dm = el.dataset.moveMultiple
                            const dis = (intX - x) / Number(dm)
                            const transform_arr = o_imgs_styles[i].split(',')
                            let translate_x = Number(transform_arr[4])
                            let new_translate_x = translate_x + dis
                            transform_arr.splice(4, 1, String(new_translate_x))
                            let transform_str = transform_arr.join(',')
                    
                            if(el.dataset.isOpacity) {
                            const o_arr = o_imgs_opacitys[i].split(':')
                            const o_value = Number(o_arr[1])
                            let href_w = window.screen.width / 2
                    
                            const o_dis = Number(el.dataset.isOpacity) ? intX - x : x - intX
                    
                            let new_o_value = o_dis / href_w
                            o_arr.splice(1, 1, new_o_value)
                            let o_str = o_arr.join(':')
                            transform_str += `; ${o_str}`
                            }
                    
                            el.setAttribute('style', transform_str)
                        })
                        }
                        mb.onmouseleave = function() {
                        imgs.forEach((el, i) => {
                            el.setAttribute('style', o_imgs_styles[i])
                        })
                        }
                    
                        // 樱花飘落canvas 
                        const c = document.getElementById('canvas')
                        const ctx = c.getContext('2d')
                        const _w = c.width, _h = c.height;
                        const scales = [0.03, 0.04, 0.05, 0.06, 0.07, 0.08];
                        const slen = scales.length - 1;
                        const speedX = 2, speedY = 3;
                        class flower {
                        constructor(){
                            this.x = Math.random() * _w;
                            this.y = 0;
                            this.speedX = 0;
                            this.speedY = 0;
                            this.scale = 0;
                            this.width = 0;
                            this.height = 0;
                            this.img = null
                        }
                        init() {
                            this.img = new Image()
                            const f = Math.random() * 10 > 5 ? 1 : 0
                            const si = Math.floor(Math.random() * slen)
                            this.speedX = Math.random() * speedX
                            this.speedY = Math.random() * speedY
                            this.scale = scales[si]
                            this.width = this.height = 250 * this.scale
                            const src = f ? "./imgs/flow1.png" : './imgs/flow2.png';
                            this.img.src = src
                        }
                        draw(ctx) {
                            this.img.onload = () => {
                            ctx.drawImage(this.img, this.x, this.y, this.width, this.height)
                            }
                        }
                        move(ctx) {
                            this.x = this.x + this.speedX >= _w ? Math.random() * _w : this.x + this.speedX;
                            this.y = this.y >= _h ? 0 : this.y + this.speedY;
                            ctx.drawImage(this.img, this.x, this.y, this.width, this.height)
                        }
                        }
                        const flowers = []
                        function start() {
                        const max = 50;
                        for(let i = 0; i < max; i++) {
                            const f = new flower()
                            f.init()
                            f.draw(ctx)
                            flowers.push(f)
                        } 
                        }
                        function move() {
                        ctx.clearRect(0,0,_w,_h)
                        for(let i=0; i<flowers.length; i++) {
                            flowers[i].move(ctx)
                        }
                        window.requestAnimationFrame(move)
                        }
                        start()
                        move()
                    </script>
                    </div>
                <div class="back" style="position: absolute; top: 0; height: 70px; width: 100%; background: linear-gradient(rgba(0,0,0,.4),transparent);"></div>
            <div class="left">
                <ul>
                    <li><a target="_blank" href="https://www.bilibili.com/" class="l1">主站</a></li>
                    <li><a target="_blank" href="https://www.bilibili.com/anime/" class="l2">番剧</a></li>
                    <li><a target="_blank" href="https://game.bilibili.com/platform/" class="l3">游戏中心</a></li>
                    <li><a target="_blank" href="https://live.bilibili.com/" class="l4">直播</a></li>
                    <li><a target="_blank" href="https://show.bilibili.com/platform/home.html?msource=pc_web" class="l5">会员购</a></li>
                    <li><a target="_blank" href="https://manga.bilibili.com/?from=bill_top_mnav" class="l6">漫画</a></li>
                    <li><a target="_blank" href="https://www.bilibili.com/v/game/match/" class="l7">赛事</a></li>
                    <li><a target="_blank" href="https://app.bilibili.com/" class="l8">下载APP</a></li>
                </ul>
            </div>
            <div class="search">
                <form action="https://search.bilibili.com/all">
                    <span class="group">
                        <input name="keyword" class="gets">
                        <span>
                            <input type="submit" value="搜索" class="enter">
                        </span>
                    </span>    
                </form>
            </div>
            <div class="right">
                <a target="_blank" href="https://passport.bilibili.com/login" class="more">登录</a>
                <a target="_blank" href="https://passport.bilibili.com/login" class="more">大会员</a>
                <a target="_blank" href="https://passport.bilibili.com/login" class="more">消息</a>
                <a target="_blank" href="https://t.bilibili.com/?" class="more">动态</a>
                <a target="_blank" href="https://passport.bilibili.com/login" class="more">收藏</a>
                <a target="_blank" href="https://passport.bilibili.com/login" class="more">历史</a>
                <a target="_blank" href="https://passport.bilibili.com/login" class="more">创作中心</a>
                <a target="_blank" href="https://passport.bilibili.com/login" class="more">投稿</a>
            </div>
        </div>
        <div class="mid" style="text-align: center;">
            <div class="total">
                <div class="t1" style="display: inline-block; height: 68px;">
                    <div class="class" style="display: inline-block;">
                        <div class="c1 c"> <img src="./imgs/p1.png" width="28px"> 首页</div>
                        <div class="c2 c">动态</div>
                        <div class="c3 c">热门</div>
                        <div class="c4 c">频道</div>
                    </div>
                    <div class="all" style="width: 530px; display: inline-block;">
                        <div class="a1 a">动画</div>
                        <div class="a2 a">音乐</div>
                        <div class="a3 a">舞蹈</div>
                        <div class="a4 a">知识</div>
                        <div class="a5 a">生活</div>
                        <div class="a6 a">时尚</div>
                        <div class="a7 a">娱乐</div>
                        <div class="a8 a">放映厅</div>
                        <div class="a9 a">番剧</div>
                        <div class="a10 a">国创</div>
                        <div class="a11 a">游戏</div>
                        <div class="a12 a">数码</div>
                        <div class="a13 a">鬼畜</div>
                        <div class="a14 a">资讯</div>
                        <div class="a15 a">影视</div>
                        <div class="a16 a">更多</div>
                    </div>
                    <div class="more" style="width: 150px; display: inline-block;">
                        <div class="m1 m">专栏</div>
                        <div class="m2 m">活动</div>
                        <div class="m3 m">小黑屋</div>
                        <div class="m4 m">直播</div>
                        <div class="m5 m">课堂</div>
                        <div class="m6 m">音乐PLUS</div>
                    </div>
                </div>
                <div class="t2">
                    <div class="for">
                        
                    </div>
                    <div class="video1 v"></div>
                    <div class="video2 v"></div>
                    <div class="video3 v"></div>
                    <div class="video4 v"></div>
                    <div class="video5 v"></div>
                    <div class="video6 v"></div>
                </div>
                <div class="t3">
                    <div class="top"></div>
                    <div class="video1 v"></div>
                    <div class="video2 v"></div>
                    <div class="video3 v"></div>
                    <div class="video4 v"></div>
                    <div class="img"></div>
                </div>
                <div class="t4">
                    <div class="dianjin">
                        <div class="video1 v"></div>
                        <div class="video2 v"></div>
                        <div class="video3 v"></div>
                        <div class="video4 v"></div>
                        <div class="img"></div>
                    </div>
                </div>
                <div class="t5">
                    <div class="guanggao"></div>
                </div>
            </div>
            <div class="comtainer">
                <div class="c1"></div>
                <div class="c2"></div>
                <div class="c3"></div>
                <div class="c4"></div>
                <div class="c5"></div>
                <div class="c6"></div>
                <div class="c7"></div>
                <div class="c8"></div>
                <div class="c9"></div>
                <div class="c10"></div>
            </div>
            <div class="fix">

            </div>
        </div>
        <div class="bottom">

        </div>
    </div>
</body>
</html>